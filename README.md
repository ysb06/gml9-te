# gml9-te

## 소개

그래프 머신러닝 팀프로젝트를 위한 코드. 인천 송도의 도로 교통량을 예측하는 것이 목표

## 사용 데이터셋

### 기본 데이터셋

- 표준노드링크
    - 국가교통정보센터에서 다운로드 함. 최신 버전(2023-11-13, 제일 위에)
    - [다운로드 링크](https://www.its.go.kr/nodelink/nodelinkRef)
- 인천광역시 도로 교통량 통계 데이터
    - API로부터 2023년 1월 1일 부터 2023년 11월 25일까지 데이터 다운로드 및 Pandas DataFrame으로 변환 그리고 엑셀 및 Pickle로 저장
    - 가능하면 pickle 파일을 사용, 엑셀은 느림. 엑셀은 데이터 확인용으로...

## 확장 데이터셋

- 인천광역시 도로 교통량 통계 데이터
    - 추가로 표준노드링크로부터 본 데이터에서만 사용되는 노드 및 링크를 추출해서 따로 shp로 저장함
- imc_nodelink
    - 인천광역시 전체의 노드 및 링크 데이터 추출
- NodeLink.qgz
    - 확장 데이터셋 추출 및 데이터 시각화를 위한 QGIS 프로젝트 파일
    - 제대로 데이터가 불러오지 못할 수 있음. 단순히 Resources 내 모든 shapefile을 레이어로 불러온 프로젝트이므로 큰 의미는 없음.

## 개발 환경 구축방법

- 파이썬 버전은 3.9를 대상
- git clone을 사용하여 프로젝트 복사
- 필요한 패키지 설치
    - requirements.txt를 생성하지 못했음. 죄송합니다.
    - Pipfile 파일 참조 부탁드려요
- 데이터는 파일 크기가 커서 별도로 공유
    - [Resources 자료 구글 드라이브](https://drive.google.com/drive/folders/1gbIPw4kUQB_wefAqa_iITTEIBzFW33qR?usp=sharing)
- vscode 사용을 전제로 환경이 구축되어 있음
    - 프로젝트 실행시 F5(mac에서는 ctrl+F5)로 실행 가능


## 현재까지 완료한 것

1. 표준노드링크 분석 완료
    - Shapefile 구조로 되어 있음
        + shp: 지리 사상의 기하학 정보 저장  
        + shx: 지리 사상의 기하학 정보의 인덱스 저장(shp 파일의 인덱스)  
        + dbf: 지리 사상의 속성 정보를 제공하는 dBASE 파일(table)  
        + sbx: 지리 사상 공간 인덱스 저장  
        + sbn: spatial join 등의 기능을 수행하거나, shape 필드에 대한 인덱스를 생성할 때 필요한 파일
    - 파이썬의 geopandas를 사용하면 바로 읽을 수 있음 (shp 파일을 읽으면 됨)
    - 시각화는 QGIS를 설치하여 레이어에 추가하면 바로 가능.
2. IMCRTS 데이터를 참조하여 필요한 노드와 링크만 표준노드링크에서 추출 (효율성을 위하여)
    - imc_nodelink에 저장됨

3. 인천광역시 도로 교통량 통계 데이터 크롤링 완료
    - imcrts.py 참조
        + 주의: 하루 요청 횟수가 제한되어 있으므로 가능하면 구글 드라이브 내 데이터를 다운로드하여 사용할 것.
    - 일단은 2023년 1월 1일부터 2023년 11월 25일까지 데이터만 크롤링 하였음


## 앞으로 할 일

가능하면 이번 주 평일 내에 모델 학습 및 예측이 완료 되어야 함.

1. 어떤 노드 및 링크 그래프를 활용할지 정해야 함.
    - 송도의 데이터가 많이 없음
        - 데이터를 더 찾아 볼 수는 있지만 시간이 없음
        - 인천광역시 전체로 범위를 확장하는 것에 대해 검토 필요
    - 교통량 데이터 또한 일부만 포함함 (데이터 누락)
    - 데이터셋 내 각 overview.png 파일을 참조

2. 어떤 모델을 활용할지 필요
    - Wang et al(2020) 모델을 사용할지, 다른 모델도 활용할지
    - 각 모델에 맞게 데이터 전처리 필요

3. 2개의 데이터를 통해 그래프 데이터로 구성 필요
    - 모델 정해진 후 데이터셋 형태 정의
    - 그래프 데이터로 변환 필요, 데이터 셋 구축 필요

4. 보고서 (이번 주 주말 진행?)